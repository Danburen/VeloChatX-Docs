# 定时广播配置
以下配置均在在`broadcast.md`中可以找到并且修改。

本页面介绍的是有关定时广播的配置，该广播的触发一般通过插件的`内置计时器`实现的定时广播，旨在定时想一些玩家发送新手帮助或者游戏指导。
如果想要设置玩家加入或离开服务器的被动广播，请跳转[被动广播配置](/guide/config/passive-broadcast)

## 准备知识
VeloChatX采用一种过程为 `混合广播` 的模式管理定时广播的消息，这样可以有效的确保每个分区中的游戏服务业务都相互隔离，以
适配和适应分区聊天的模式。

`混合广播`由两部分构成，分别为`全局广播`和`局部广播` (或者可以称为**全服广播**,**区服广播**)。

VeloChatX 在定时发送广播的时候，会对匹配到的所有子服当中，查找到当前频道的所有消息即`局部广播`的消息，与`全局广播`的消息进行合并
，合并的前提是在两者都启用的情况下，并对合并之后的消息`随机抽取`并尝试广播。

定时的间隔可以通过`interval`属性进行设置，以`seconds`为单位
> [!TIP]
> 定时广播会尝试对所有服务器的所有玩家发送消息，当玩家群体体量比较庞大且复杂的情况下，推荐将这个发送间隔进行适当的延长来减少
> 性能的损失和浪费。

## 全服广播

指向配置文件中的`global`属性，对应的是定时向全服发送等效的消息，不受到局部广播的污染，通常可以放一些全服的动态消息 
比如介绍服务器的官方群聊，服务器全局动态消息之类的e.g.

该配置结构一般如下:
```yaml
global:
  enable: true
  prefix: "§7[§b服务器娘§7]§r §8:§r"
  message-list:
    - "欢迎进入{proxy}，快来和大家一起冒险吧！"
    - "本服§r每日§a活跃§r玩家有机会获得丰厚奖励！"
    - "§c注意：§r请遵守服务器规则，共同创建和谐的游戏环境。"
    - "§f我们有专属的§9自定义插件§r，带来不一样的游戏体验！"
    - "§d服务器§r内有丰富的§a游戏模式§r，快来体验吧！"
    - "§7不要忘了加入我们的§bQQ群§r，获取最新动态和活动信息！"
    - "§f欢迎所有新玩家加入§r，任何问题请向管理员求助！"
    - "§e快邀请你的朋友们一起来§g玩耍§r吧，更多精彩等着你！"
    - "§a欢迎大家来到§7{server}§r，祝您游戏愉快！"
    - "§5全服§r§c活动§r即将开始，记得准时参加哦！"
    - "§d感谢您的支持与参与，我们会继续为大家提供更好的服务！"
```
其中 `prefix` 表示为当前广播的消息前缀

> [!IMPORTANT]
> 当全局广播被启用的时候 message-list 也就是 `广播内容` 会合并(全局广播的在最上面)

## 区服广播
指向配置文件中的`locale`字段。当全局广播被禁用的时候，VeloChatX的**定时广播器**会只向匹配到的服务器进行消息广播。

该配置文件的结构如下：
```yaml
locale:
  enable: true
  broadcast-list:
    example:
      enable: true
      prefix: "[§a服务器娘§r] §8:§r"
      message-list:
        - "服务器正在§a搭建§r中，更多精彩内容即将呈现。"
        - "§6欢迎§r加入服务器官方群"
        - "欢迎加入服务器大家庭"
        - "§d服务器§r内有丰富的§a游戏模式§r，快来体验吧！"
      channel-list:
        - login
      server-list:
        -
    example2:
      enable: false
      prefix: "[§a服务器娘§r] §8:§r"
      message-list:
        - "服务器正在§a搭建§r中，更多精彩内容即将呈现。"
        - "§6欢迎§r加入服务器官方群"
        - "欢迎加入服务器大家庭"
        - "§b新手村§r已开启，来吧！新玩家，开始您的冒险吧！"
      channel-list:
        - lobby
        - games
        - survive
      server-list:
        -
```
`broadcast-list` 字段存储的是对应的每一种区服广播，其下方的每个属性(`example1`,`explame2`)对应的是每个区服的名字。
`channel-list`，`server-list`,分别对应的是该区服广播生效的区服以及其他子服，其中的所有包含的子服都会发送广播消息 。
您还可以通过设置`prefix`配置每个区服广播的广播消息前缀。

> [!TIP]
> 若出现相同的 **区服广播** 名称，则仅会读取首次读取到的区服广播。
> 
> 若一个或多个channel或者server在多个 **区服广播** 当中，那么：
> * `prefix` 仅会继承最后一个广播的prefix
> * 不同区服广播中所含相同的消息会合并重复消息**不会增加**出现概率
